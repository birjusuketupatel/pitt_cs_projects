# pittRCDB: Term Project for CS2550 (Principles of Database Systems)


## Roadmap

- [X]  Phase 1
- [X]  Phase 2
- [X]  Phase 3


## How to Compile

Requires:
- C++ compiler with C++11 support (e.g., a modern version of g++)
```
g++ -std=c++11 ./src/main -o pittRCDB
```
### Compile with Make (Recommended)
Requires:
  - g++
  - GNU Make
```bash
make
```

### Compile with 
## Usage/Examples

### To get usage information:
```sh
$ ./pittRCDB
Usage: ./pittRCDB [MODE] [PROGRAM] [PROGRAM ...]

Mode :
  random [SEED]
  roundrobin
```

### To use random transaction manager (with seed `1234`):
```sh
./pittRCDB random 1234 ./test/prog1.txt ./test/prog2.txt
```
This produces a log called `random.log` in the working directory.

### To use roundrobin transaction manager:
```sh
./pittRCDB roundrobin ./test/prog1.txt ./test/prog2.txt
```
This produces a log called `roundrobin.log` in the working directory.

## Testing

<mark>
BEFORE RUNNING A TEST CASE, PLEASE REMOVE the `./tables` directory and ensure the presence of the `./logs` directory!
</mark>

Various '*normal*' and '*benchmark*' tests were written to test the accuracy and performance for this system. Please see the [tests](./tests/) directory for these test cases.

Contained inside the [tests](./tests/) directory is a [`instructions.txt`](./tests/recovery/benchmark/large-txns/instructions.txt) that outlines:
- How to run the tests
- What it tests
- The expected results

### Concurrency and Deadlock Testing
PittRDBC is guaranteed to be safe from deadlocks while still supporting performant concurrent operations. Unfortunately, the correctness of these functionalities are much harder when using the transaction manager. That is, the order of when the system sees the transactions need to be carefully controlled, meaning using random or roundrobin modes does not suffice.

To demonstrate its correctness and performance, PittRDBC has a special "testing mode". To launch into testing mode, launch pittRDBC with the argument `test`, followed by the name of the test, as specified in [Tests.cpp](./src/Tests.cpp):
```sh
./pittRCDB test deadlock-normal
```

For a list of available tests, run
```sh
./pittRCDB test help
```

### Examining the Results
In both modes, there are two places in which results can appear in:
1. The standard output is used to show the query that is currently executing, and the output of the query (for those that require it). It also prints summary statistics at the conclusion of the test.
2. The [./logs](./logs/) directory contains all the logs that is generated by PittRDBC.
  - `roundrobin.log` or `random.log` is the log used by the transaction manager which records all the querys it sees **in-order**.
  - `scheduler.log` is used by the scheduler and lock manager to describe what it is doing (e.g., acquring a lock, or blocking a transaction).
  - `table_manager.log` is used by the Disk/Data/Memory manager to record what operations it is performing at a low-level. This includes things such as loading pages, writing to disk, and swapping.

## Authors

- [Shinwoo Kim](https://github.com/shinwookim)
- [Birju Patel](https://github.com/birjusuketupatel)

